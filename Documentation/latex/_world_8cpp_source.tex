\doxysection{World.\+cpp}
\hypertarget{_world_8cpp_source}{}\label{_world_8cpp_source}\index{InitializeDirect3D/World.cpp@{InitializeDirect3D/World.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#define\ NOMINMAX}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ "{}World.hpp"{}}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00008}\mbox{\hyperlink{class_world_a99c692ab277a66c03ca48e8ea568ecb0}{00008}}\ \mbox{\hyperlink{class_world_a99c692ab277a66c03ca48e8ea568ecb0}{World::World}}(\mbox{\hyperlink{class_state}{State}}*\ state)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00009}00009\ \ \ \ \ :\ mSceneGraph(new\ \mbox{\hyperlink{class_scene_node}{SceneNode}}(state))}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00010}00010\ \ \ \ \ ,\ mState(state)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00011}00011\ \ \ \ \ ,\ mPlayerAircraft(nullptr)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00012}00012\ \ \ \ \ ,\ mBackground(nullptr)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00013}00013\ \ \ \ \ ,\ mWorldBounds(-\/3.25f,\ 3.25f,\ -\/1.5f,\ 2.5f)\ \textcolor{comment}{//Left,\ Right,\ Down,\ Up\ -\/\ this\ can\ be\ changed\ depending\ on\ where\ you\ want\ the\ player\ to\ be}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00014}00014\ \ \ \ \ ,\ mSpawnPosition(0.f,\ 0.f)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00015}00015\ \ \ \ \ ,\ mScrollSpeed(1.0f)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00016}00016\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00017}00017\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00019}00019\ \textcolor{preprocessor}{\#pragma\ region\ Step\ 14}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00020}\mbox{\hyperlink{class_world_af224b413f30c86ec99d042d0f4df56ee}{00020}}\ \mbox{\hyperlink{class_command_queue}{CommandQueue}}\&\ \mbox{\hyperlink{class_world_af224b413f30c86ec99d042d0f4df56ee}{World::getCommandQueue}}()}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00021}00021\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00022}00022\ \ \ \ \ \textcolor{keywordflow}{return}\ mCommandQueue;}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00023}00023\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00024}00024\ \textcolor{preprocessor}{\#pragma\ endregion}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00033}\mbox{\hyperlink{class_world_a36c003f54e14e022a360551af5e7923e}{00033}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_world_a36c003f54e14e022a360551af5e7923e}{World::update}}(\textcolor{keyword}{const}\ GameTimer\&\ gt)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00034}00034\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00035}00035\ \textcolor{preprocessor}{\#pragma\ region\ Step\ 15}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00036}00036\ \ \ \ \ mPlayerAircraft-\/>setVelocity(0.0f,\ 0.0f,\ 0.0f);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{while}\ (!mCommandQueue.isEmpty())}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00038}00038\ \ \ \ \ \ \ \ \ mSceneGraph-\/>onCommand(mCommandQueue.pop(),\ gt);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00040}00040\ \ \ \ \ PlayerPosition();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00041}00041\ \ \ \ \ mSceneGraph-\/>update(gt);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00042}00042\ \ \ \ \ PlayerVelocity();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00044}00044\ \textcolor{preprocessor}{\#pragma\ endregion}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00046}00046\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00053}\mbox{\hyperlink{class_world_ab51a17ccbb108616daacd0c34973dc8d}{00053}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_world_ab51a17ccbb108616daacd0c34973dc8d}{World::draw}}()}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00054}00054\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00055}00055\ \ \ \ \ mSceneGraph-\/>draw();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00056}00056\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00064}\mbox{\hyperlink{class_world_ae7df49f5d488e5cd1254bf360966f410}{00064}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_world_ae7df49f5d488e5cd1254bf360966f410}{World::buildScene}}()}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00065}00065\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00066}00066\ \ \ \ \ \textcolor{comment}{//\ Create\ and\ set\ up\ player\ aircraft}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00067}00067\ \ \ \ \ std::unique\_ptr<Aircraft>\ player(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_aircraft}{Aircraft}}(\mbox{\hyperlink{class_aircraft_a7dae28542933e088032b753600046acdaed1ed20dae2d2d8eaa1d2186c6ee9315}{Aircraft::Eagle}},\ mState));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00068}00068\ \ \ \ \ mPlayerAircraft\ =\ player.get();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00069}00069\ \ \ \ \ mPlayerAircraft-\/>setPosition(0,\ 0.1,\ 0.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00070}00070\ \ \ \ \ mPlayerAircraft-\/>setScale(0.5,\ 0.5,\ 0.5);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00071}00071\ \ \ \ \ mPlayerAircraft-\/>setVelocity(mScrollSpeed,\ 0.0,\ 0.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00072}00072\ \ \ \ \ mSceneGraph-\/>attachChild(std::move(player));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00074}00074\ \ \ \ \ \textcolor{comment}{//\ Create\ and\ set\ up\ first\ enemy\ aircraft}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00075}00075\ \ \ \ \ std::unique\_ptr<Aircraft>\ enemy1(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_aircraft}{Aircraft}}(\mbox{\hyperlink{class_aircraft_a7dae28542933e088032b753600046acdaf080b57c0c515dea65f056395cc6d59b}{Aircraft::Raptor}},\ mState));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00076}00076\ \ \ \ \ \textcolor{keyword}{auto}\ raptor\ =\ enemy1.get();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00077}00077\ \ \ \ \ raptor-\/>setPosition(0.5,\ 0,\ -\/1);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00078}00078\ \ \ \ \ raptor-\/>setScale(1.0,\ 1.0,\ 1.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00079}00079\ \ \ \ \ raptor-\/>setWorldRotation(0,\ 0.0,\ 0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00080}00080\ \ \ \ \ mPlayerAircraft-\/>attachChild(std::move(enemy1));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00082}00082\ \ \ \ \ \textcolor{comment}{//\ Create\ and\ set\ up\ second\ enemy\ aircraft}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00083}00083\ \ \ \ \ std::unique\_ptr<Aircraft>\ enemy2(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_aircraft}{Aircraft}}(\mbox{\hyperlink{class_aircraft_a7dae28542933e088032b753600046acdaf080b57c0c515dea65f056395cc6d59b}{Aircraft::Raptor}},\ mState));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00084}00084\ \ \ \ \ \textcolor{keyword}{auto}\ raptor2\ =\ enemy2.get();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00085}00085\ \ \ \ \ \textcolor{comment}{//raptor2-\/>setPosition(-\/0.5,\ 0,\ 1);}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00086}00086\ \ \ \ \ raptor2-\/>setPosition(-\/0.5,\ 0,\ -\/1);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00087}00087\ \ \ \ \ raptor2-\/>setScale(1.0,\ 1.0,\ 1.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00088}00088\ \ \ \ \ \textcolor{comment}{//raptor2-\/>setWorldRotation(0,\ XM\_PI,\ 0);}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00089}00089\ \ \ \ \ raptor2-\/>setWorldRotation(0,\ 0.0,\ 0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00090}00090\ \ \ \ \ mPlayerAircraft-\/>attachChild(std::move(enemy2));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00092}00092\ \ \ \ \ \textcolor{comment}{//\ Create\ and\ set\ up\ background\ sprite}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00093}00093\ \ \ \ \ std::unique\_ptr<SpriteNode>\ backgroundSprite(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_sprite_node}{SpriteNode}}(mState));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00094}00094\ \ \ \ \ backgroundSprite-\/>SetDrawName(\textcolor{stringliteral}{"{}Galaxy"{}},\ \textcolor{stringliteral}{"{}boxGeo"{}},\ \textcolor{stringliteral}{"{}box"{}});}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00095}00095\ \ \ \ \ mBackground\ =\ backgroundSprite.get();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00096}00096\ \ \ \ \ \textcolor{comment}{//mBackground-\/>setPosition(mWorldBounds.left,\ mWorldBounds.top);}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00097}00097\ \ \ \ \ mBackground-\/>setPosition(0,\ 0,\ 0.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00098}00098\ \ \ \ \ mBackground-\/>setScale(10.0,\ 1.0,\ 200.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00099}00099\ \ \ \ \ mBackground-\/>setVelocity(0,\ 0,\ -\/mScrollSpeed);\ \textcolor{comment}{//background\ scrolling\ enabled}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00100}00100\ \ \ \ \ mSceneGraph-\/>attachChild(std::move(backgroundSprite));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00101}00101\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00102}00102\ \ \ \ \ \textcolor{comment}{//\ Create\ and\ set\ up\ instruct\ sprite}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00103}00103\ \ \ \ \ std::unique\_ptr<SpriteNode>\ InstructionSprite(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_sprite_node}{SpriteNode}}(mState));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00104}00104\ \ \ \ \ InstructionSprite-\/>SetDrawName(\textcolor{stringliteral}{"{}GameText"{}},\ \textcolor{stringliteral}{"{}boxGeo"{}},\ \textcolor{stringliteral}{"{}box"{}});}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00105}00105\ \ \ \ \ mBackground\ =\ backgroundSprite.get();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00106}00106\ \ \ \ \ \textcolor{comment}{//mBackground-\/>setPosition(mWorldBounds.left,\ mWorldBounds.top);}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00107}00107\ \ \ \ \ InstructionSprite-\/>setPosition(0,\ 1.0,\ 2.4);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00108}00108\ \ \ \ \ InstructionSprite-\/>setScale(2.0,\ 0,\ 2.0);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00109}00109\ \ \ \ \ InstructionSprite-\/>setVelocity(0,\ 0,\ 0);\ \textcolor{comment}{//background\ scrolling\ enabled}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00110}00110\ \ \ \ \ mSceneGraph-\/>attachChild(std::move(InstructionSprite));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00112}00112\ \ \ \ \ \textcolor{comment}{//\ Build\ the\ scene\ graph}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00113}00113\ \ \ \ \ mSceneGraph-\/>build();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00114}00114\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00119}00119\ \textcolor{keywordtype}{void}\ World::PlayerPosition()}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00120}00120\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00121}00121\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ borderDistance\ =\ 10.f;}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00123}00123\ \ \ \ \ XMFLOAT3\ position\ =\ mPlayerAircraft-\/>\mbox{\hyperlink{class_scene_node_a6ba2f5754854829e7e49f135bb4fce45}{getWorldPosition}}();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00124}00124\ \ \ \ \ position.x\ =\ std::max(position.x,\ mWorldBounds.x);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00125}00125\ \ \ \ \ position.x\ =\ std::min(position.x,\ mWorldBounds.y);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00126}00126\ \ \ \ \ position.z\ =\ std::max(position.z,\ mWorldBounds.z);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00127}00127\ \ \ \ \ position.z\ =\ std::min(position.z,\ mWorldBounds.w);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00128}00128\ \ \ \ \ mPlayerAircraft-\/>\mbox{\hyperlink{class_scene_node_a45f8882749060b059fe26eb02f7f843b}{setPosition}}(position.x,\ position.y,\ position.z);}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00129}00129\ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00134}00134\ \textcolor{keywordtype}{void}\ World::PlayerVelocity()}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00135}00135\ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00136}00136\ \ \ \ \ XMFLOAT3\ velocity\ =\ mPlayerAircraft-\/>getVelocity();}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00138}00138\ \ \ \ \ \textcolor{keywordflow}{if}\ (velocity.x\ !=\ 0.0f\ \&\&\ velocity.z\ !=\ 0.0f)}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00139}00139\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00140}00140\ \ \ \ \ \ \ \ \ mPlayerAircraft-\/>setVelocity(velocity.x\ /\ std::sqrt(2.f),\ velocity.y\ /\ std::sqrt(2.f),\ velocity.z\ /\ std::sqrt(2.f));}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00141}00141\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_world_8cpp_source_l00142}00142\ \}}

\end{DoxyCode}
